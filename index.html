<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover"/>
  <title>MAVILO DOLCE ‚Äî Sugar Art & Couture Cakes</title>

  <meta name="description" content="MAVILO DOLCE ‚Äî Atelier artigianale di Sugar Art & Couture Cakes. Fiori di zucchero, torte nuziali su commissione, pezzi unici di pasticceria artistica."/>
  <meta name="keywords" content="sugar art, couture cakes, torte nuziali, fiori di zucchero, wedding cake, torte su commissione"/>
  <meta name="author" content="MAVILO DOLCE"/>
  <meta property="og:title" content="MAVILO DOLCE ‚Äî Sugar Art & Couture Cakes"/>
  <meta property="og:description" content="Ogni creazione √® un'opera d'arte irripetibile. Fiori di zucchero e torte couture realizzate a mano."/>
  <meta property="og:type" content="website"/>
  <meta property="og:image" content="https://images.unsplash.com/photo-1558636508-e0969251be4b?w=1200&q=80"/>
  <meta name="twitter:card" content="summary_large_image"/>
  <meta name="theme-color" content="#FFFFFF"/>

  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,500;0,700;1,400;1,500&family=Lato:wght@300;400;700&display=swap" rel="stylesheet"/>

  <script src="https://cdn.tailwindcss.com"></script>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <script>
    tailwind.config = {
      theme: { extend: {
        colors: { gold:'#D4AF37','gold-pale':'#F0E3A0', anthracite:'#1A1A1A','warm':'#FAFAF8','offwhite':'#F5F3EE' },
        fontFamily: { serif:['Playfair Display','serif'], sans:['Lato','sans-serif'] },
        screens: { xs:'380px' }
      }}
    };
  </script>

  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    html { scroll-behavior: smooth; -webkit-text-size-adjust: 100%; }
    body { font-family:'Lato',sans-serif; background:#FFF; color:#1A1A1A; overflow-x:hidden; }

    /* ‚Äî Scrollbar ‚Äî */
    ::-webkit-scrollbar { width:3px; }
    ::-webkit-scrollbar-thumb { background:#D4AF37; border-radius:2px; }

    /* ‚Äî Loading Screen ‚Äî */
    #loader {
      position:fixed; inset:0; background:#FFF; z-index:9999;
      display:flex; flex-direction:column; align-items:center; justify-content:center; gap:1.5rem;
      transition: opacity 0.7s ease, visibility 0.7s ease;
    }
    #loader.hidden { opacity:0; visibility:hidden; pointer-events:none; }
    .loader-bar { width:160px; height:1px; background:rgba(212,175,55,0.2); position:relative; overflow:hidden; }
    .loader-bar::after {
      content:''; position:absolute; inset:0;
      background:linear-gradient(90deg, transparent, #D4AF37, transparent);
      animation: loadSlide 1.4s ease infinite;
    }
    @keyframes loadSlide { 0%{transform:translateX(-100%)} 100%{transform:translateX(200%)} }

    /* ‚Äî Nav ‚Äî */
    .nav-glass {
      position:fixed; top:0; left:0; right:0; z-index:100;
      backdrop-filter:blur(24px); -webkit-backdrop-filter:blur(24px);
      background:rgba(255,255,255,0.94);
      transition: border-color 0.4s, box-shadow 0.4s;
    }
    .nav-glass.scrolled { border-bottom:1px solid rgba(212,175,55,0.22); box-shadow:0 2px 30px rgba(0,0,0,0.05); }
    .nav-inner { max-width:1200px; margin:0 auto; padding:0 1.25rem; display:flex; align-items:center; justify-content:space-between; height:60px; }
    @media(min-width:768px){ .nav-inner { padding:0 2.5rem; height:68px; } }
    .nav-logo { font-family:'Playfair Display',serif; font-size:1.05rem; font-weight:600; letter-spacing:0.22em; color:#1A1A1A; background:none; border:none; cursor:pointer; -webkit-tap-highlight-color:transparent; }
    .nav-links { display:none; gap:2.5rem; }
    @media(min-width:768px){ .nav-links { display:flex; } }
    .nav-link { font-family:'Lato'; font-size:0.7rem; letter-spacing:0.18em; text-transform:uppercase; background:none; border:none; cursor:pointer; padding-bottom:2px; border-bottom:1px solid transparent; transition:all 0.3s; -webkit-tap-highlight-color:transparent; }
    .nav-link.active { color:#D4AF37; border-bottom-color:#D4AF37; }
    .nav-link:not(.active) { color:#1A1A1A; }
    .nav-link:hover { color:#D4AF37; }
    .hamburger { display:flex; flex-direction:column; gap:5px; background:none; border:none; cursor:pointer; padding:8px; -webkit-tap-highlight-color:transparent; }
    @media(min-width:768px){ .hamburger { display:none; } }
    .ham-line { display:block; width:22px; height:1px; background:#1A1A1A; transition:all 0.3s; }
    .mobile-menu { display:none; background:rgba(255,255,255,0.98); border-top:1px solid rgba(212,175,55,0.15); padding:0.5rem 1.25rem 1.5rem; }
    .mobile-menu.open { display:block; }
    .mobile-link { display:block; font-family:'Lato'; font-size:0.82rem; letter-spacing:0.15em; text-transform:uppercase; background:none; border:none; cursor:pointer; padding:0.85rem 0; border-bottom:1px solid rgba(212,175,55,0.1); width:100%; text-align:left; transition:color 0.2s; -webkit-tap-highlight-color:transparent; }

    /* ‚Äî Section common ‚Äî */
    .section-pad { padding:clamp(4.5rem,10vw,9rem) clamp(1.25rem,5vw,2.5rem); }
    .section-label { font-family:'Lato'; font-size:0.66rem; letter-spacing:0.44em; text-transform:uppercase; color:#D4AF37; margin-bottom:1.1rem; }
    .section-title { font-family:'Playfair Display',serif; font-size:clamp(1.9rem,4.5vw,3rem); font-weight:400; line-height:1.15; color:#1A1A1A; margin-bottom:1.4rem; }
    .gold-bar { display:block; width:38px; height:1px; background:#D4AF37; }
    .gold-bar-center { display:block; width:38px; height:1px; background:#D4AF37; margin:0 auto; }

    /* ‚Äî Reveal animation ‚Äî */
    .reveal { opacity:0; transform:translateY(32px); transition:opacity 0.85s cubic-bezier(0.25,0.46,0.45,0.94), transform 0.85s cubic-bezier(0.25,0.46,0.45,0.94); }
    .reveal.visible { opacity:1; transform:none; }
    .reveal-delay-1 { transition-delay:0.12s; }
    .reveal-delay-2 { transition-delay:0.24s; }
    .reveal-delay-3 { transition-delay:0.36s; }
    .reveal-delay-4 { transition-delay:0.48s; }

    /* ‚Äî Hero ‚Äî */
    .hero-title { font-family:'Playfair Display',serif; font-size:clamp(3.8rem,14vw,9.5rem); font-weight:400; letter-spacing:0.03em; line-height:0.9; color:#1A1A1A; }
    @keyframes heroUp { from{opacity:0;transform:translateY(36px)} to{opacity:1;transform:translateY(0)} }
    .hero-anim { opacity:0; animation:heroUp 1s cubic-bezier(0.25,0.46,0.45,0.94) forwards; }
    .ha0{animation-delay:0.1s} .ha1{animation-delay:0.28s} .ha2{animation-delay:0.46s} .ha3{animation-delay:0.64s} .ha4{animation-delay:0.82s}

    /* ‚Äî Numbers ‚Äî */
    .stat-num { font-family:'Playfair Display',serif; font-size:clamp(2.2rem,5vw,3.5rem); font-weight:400; color:#1A1A1A; line-height:1; }

    /* ‚Äî Gallery Masonry ‚Äî */
    .masonry { columns:2; column-gap:10px; }
    @media(min-width:640px){ .masonry { columns:2; column-gap:14px; } }
    @media(min-width:1024px){ .masonry { columns:3; column-gap:16px; } }
    .mason-item { break-inside:avoid; margin-bottom:10px; cursor:pointer; overflow:hidden; position:relative; display:block; }
    @media(min-width:640px){ .mason-item { margin-bottom:14px; } }
    @media(min-width:1024px){ .mason-item { margin-bottom:16px; } }
    .mason-img { width:100%; display:block; transition:transform 0.7s cubic-bezier(0.25,0.46,0.45,0.94); object-fit:cover; }
    .mason-item:hover .mason-img { transform:scale(1.04); }
    .mason-overlay { position:absolute; inset:0; background:rgba(26,26,26,0); transition:background 0.4s; display:flex; align-items:flex-end; padding:1rem; }
    .mason-item:hover .mason-overlay { background:rgba(26,26,26,0.52); }
    .mason-label { font-family:'Playfair Display',serif; font-style:italic; color:#fff; font-size:0.82rem; letter-spacing:0.04em; opacity:0; transition:opacity 0.3s; }
    .mason-item:hover .mason-label { opacity:1; }

    /* ‚Äî Lightbox ‚Äî */
    .lb-overlay { position:fixed; inset:0; background:rgba(8,8,8,0.97); z-index:1000; display:flex; flex-direction:column; align-items:center; justify-content:center; }
    .lb-img { max-width:92vw; max-height:78vh; object-fit:contain; display:block; animation:fadeInLb 0.3s ease; }
    @keyframes fadeInLb { from{opacity:0;transform:scale(0.97)} to{opacity:1;transform:scale(1)} }
    .lb-btn { background:none; border:none; color:rgba(255,255,255,0.45); cursor:pointer; display:flex; align-items:center; justify-content:center; transition:color 0.2s; padding:12px; -webkit-tap-highlight-color:transparent; }
    .lb-btn:hover { color:#D4AF37; }
    .lb-nav { position:absolute; top:50%; transform:translateY(-50%); }
    .lb-prev { left:0.5rem; } .lb-next { right:0.5rem; }
    @media(min-width:640px){ .lb-prev{left:1.5rem} .lb-next{right:1.5rem} }

    /* ‚Äî Form inputs ‚Äî */
    .f-input { width:100%; padding:0.92rem 1rem; border:1px solid rgba(26,26,26,0.18); font-family:'Lato'; font-size:1rem; background:#FAFAF8; color:#1A1A1A; -webkit-appearance:none; appearance:none; transition:border-color 0.3s, box-shadow 0.3s; border-radius:0; }
    .f-input:focus { outline:none; border-color:#D4AF37; box-shadow:0 0 0 3px rgba(212,175,55,0.12); }
    .f-label { font-family:'Lato'; font-size:0.68rem; letter-spacing:0.22em; text-transform:uppercase; color:#777; display:block; margin-bottom:0.55rem; }

    /* ‚Äî Buttons ‚Äî */
    .btn-primary { font-family:'Lato'; font-size:0.72rem; letter-spacing:0.2em; text-transform:uppercase; background:#1A1A1A; color:#D4AF37; border:none; padding:1rem 2rem; cursor:pointer; transition:all 0.3s; min-height:48px; -webkit-tap-highlight-color:transparent; display:inline-flex; align-items:center; justify-content:center; gap:8px; }
    .btn-primary:hover { background:#D4AF37; color:#1A1A1A; }
    .btn-secondary { font-family:'Lato'; font-size:0.72rem; letter-spacing:0.18em; text-transform:uppercase; background:transparent; color:#1A1A1A; border:1px solid rgba(26,26,26,0.28); padding:1rem 2rem; cursor:pointer; transition:all 0.3s; min-height:48px; -webkit-tap-highlight-color:transparent; display:inline-flex; align-items:center; justify-content:center; gap:8px; text-decoration:none; }
    .btn-secondary:hover { border-color:#D4AF37; color:#D4AF37; }
    .btn-ghost { font-family:'Lato'; font-size:0.7rem; letter-spacing:0.15em; text-transform:uppercase; background:transparent; color:#888; border:1px solid rgba(26,26,26,0.15); padding:0.85rem 1.2rem; cursor:pointer; transition:all 0.2s; min-height:44px; -webkit-tap-highlight-color:transparent; }
    .btn-ghost:hover { color:#1A1A1A; border-color:rgba(26,26,26,0.4); }
    .btn-wa { font-family:'Lato'; font-size:0.72rem; letter-spacing:0.15em; text-transform:uppercase; background:#25D366; color:#fff; border:none; padding:1rem 1.5rem; cursor:pointer; transition:background 0.3s; min-height:48px; -webkit-tap-highlight-color:transparent; display:inline-flex; align-items:center; justify-content:center; gap:8px; }
    .btn-wa:hover { background:#1ebe5d; }

    /* ‚Äî Tipologia grid ‚Äî */
    .tipo-btn { font-family:'Lato'; font-size:0.82rem; padding:0.88rem 0.5rem; border:1px solid rgba(26,26,26,0.15); background:transparent; color:#666; cursor:pointer; transition:all 0.22s; text-align:center; min-height:52px; -webkit-tap-highlight-color:transparent; line-height:1.3; }
    .tipo-btn.active { border-color:#D4AF37; background:rgba(212,175,55,0.07); color:#D4AF37; }

    /* ‚Äî Step dots ‚Äî */
    .step-dot { width:34px; height:34px; border-radius:50%; display:flex; align-items:center; justify-content:center; font-family:'Lato'; font-size:0.68rem; font-weight:700; transition:all 0.35s; }
    .step-dot.done { background:#D4AF37; border:1px solid #D4AF37; color:#1A1A1A; cursor:pointer; }
    .step-dot.active { background:#1A1A1A; border:1px solid #1A1A1A; color:#fff; }
    .step-dot.idle { background:transparent; border:1px solid rgba(26,26,26,0.2); color:rgba(26,26,26,0.35); }

    /* ‚Äî Float WA ‚Äî */
    .float-wa { position:fixed; bottom:1.5rem; right:1.5rem; z-index:500; width:56px; height:56px; border-radius:50%; background:#25D366; border:none; cursor:pointer; display:flex; align-items:center; justify-content:center; box-shadow:0 4px 20px rgba(37,211,102,0.4); transition:all 0.3s; -webkit-tap-highlight-color:transparent; }
    .float-wa:hover { transform:scale(1.08); box-shadow:0 6px 28px rgba(37,211,102,0.5); }
    @media(min-width:768px){ .float-wa { width:60px; height:60px; bottom:2rem; right:2rem; } }

    /* ‚Äî Toast ‚Äî */
    .toast { position:fixed; bottom:5.5rem; right:1.25rem; z-index:5000; background:#111; color:#D4AF37; padding:0.85rem 1.3rem; border:1px solid rgba(212,175,55,0.45); font-family:'Lato'; font-size:0.8rem; letter-spacing:0.08em; animation:slideInRight 0.35s ease; max-width:calc(100vw - 2.5rem); }
    @media(min-width:768px){ .toast { right:2rem; bottom:2rem; max-width:360px; } }
    @keyframes slideInRight { from{opacity:0;transform:translateX(18px)} to{opacity:1;transform:translateX(0)} }

    /* ‚Äî Testimonial ‚Äî */
    .testimonial-bg { background:linear-gradient(135deg, #1A1A1A 0%, #2a2018 100%); }

    /* ‚Äî Calendar admin ‚Äî */
    .cal-day { aspect-ratio:1; display:flex; align-items:center; justify-content:center; font-size:0.76rem; cursor:pointer; border-radius:3px; transition:all 0.18s; font-family:'Lato'; color:#bbb; min-height:34px; -webkit-tap-highlight-color:transparent; }
    .cal-day:hover:not(.cal-blocked):not(.cal-past) { background:rgba(212,175,55,0.18); color:#D4AF37; }
    .cal-day.cal-blocked { background:rgba(212,175,55,0.14); color:#D4AF37; font-weight:700; border:1px solid rgba(212,175,55,0.38); }
    .cal-day.cal-today { border:1px solid #D4AF37; color:#D4AF37; }
    .cal-day.cal-past { opacity:0.22; cursor:default; pointer-events:none; }

    /* ‚Äî Admin overlay ‚Äî */
    .admin-wrap { position:fixed; inset:0; background:rgba(8,8,8,0.99); z-index:2000; overflow-y:auto; -webkit-overflow-scrolling:touch; }
    .admin-inner { max-width:860px; margin:0 auto; padding:1.5rem 1.25rem 4rem; }
    @media(min-width:640px){ .admin-inner { padding:2.5rem 2rem 4rem; } }

    /* ‚Äî Login ‚Äî */
    .login-wrap { position:fixed; inset:0; background:rgba(8,8,8,0.99); z-index:2000; display:flex; align-items:center; justify-content:center; padding:1rem; }
    .login-card { background:#111; border:1px solid rgba(212,175,55,0.28); padding:2.5rem 2rem; width:100%; max-width:400px; animation:scaleIn 0.3s ease; }
    @keyframes scaleIn { from{opacity:0;transform:scale(0.96)} to{opacity:1;transform:scale(1)} }

    /* ‚Äî Atelier images ‚Äî */
    .atelier-img-wrap { position:relative; width:100%; }
    .atelier-main { width:100%; aspect-ratio:4/3; object-fit:cover; display:block; }
    .atelier-inset { position:absolute; bottom:-1.5rem; right:-1rem; width:46%; aspect-ratio:3/4; object-fit:cover; border:4px solid #fff; box-shadow:0 12px 40px rgba(0,0,0,0.12); }
    @media(min-width:768px){ .atelier-inset { bottom:-2rem; right:-1.5rem; width:42%; } }

    /* ‚Äî Recap row ‚Äî */
    .recap-row { display:flex; justify-content:space-between; align-items:center; padding:0.48rem 0; border-bottom:1px solid rgba(212,175,55,0.1); font-family:'Lato'; font-size:0.82rem; }
    .recap-key { color:#aaa; } .recap-val { color:#1A1A1A; font-weight:700; }
  </style>
</head>
<body>

<!-- Loading screen -->
<div id="loader">
  <div style="font-family:'Playfair Display',serif;font-size:1.5rem;font-weight:400;letter-spacing:0.25em;color:#1A1A1A">
    MAVILO<span style="color:#D4AF37">.</span>
  </div>
  <div class="loader-bar"></div>
  <div style="font-family:'Lato';font-size:0.6rem;letter-spacing:0.42em;text-transform:uppercase;color:#D4AF37">
    Sugar Art & Couture
  </div>
</div>

<div id="root"></div>

<script type="text/babel">
const { useState, useEffect, useRef, useCallback } = React;

/* ‚îÄ‚îÄ Constants ‚îÄ‚îÄ */
const WA = '393278354278';
const IG = 'https://www.instagram.com/anjalagomez/';
const FB = 'https://www.facebook.com/anjalagomeznapoli/photos?locale=it_IT';
const PASS = 'mavilo2026';

const GALLERY = [
  { id:1, src:'foto1.jpg', fb:'https://images.unsplash.com/photo-1519869325930-281384150729?w=800&q=85', tall:true },
  { id:2, src:'foto2.jpg', fb:'https://images.unsplash.com/photo-1464349095431-e9a21285b5f3?w=800&q=85', tall:false },
  { id:3, src:'foto3.jpg', fb:'https://images.unsplash.com/photo-1535254973040-607b474cb50d?w=800&q=85', tall:true },
  { id:4, src:'foto4.jpg', fb:'https://images.unsplash.com/photo-1571115177098-24ec42ed204d?w=800&q=85', tall:false },
  { id:5, src:'foto5.jpg', fb:'https://images.unsplash.com/photo-1623428454614-abaf00244e52?w=800&q=85', tall:true },
  { id:6, src:'foto6.jpg', fb:'https://images.unsplash.com/photo-1488477181946-6428a0291777?w=800&q=85', tall:false },
  { id:7, src:'foto7.jpg', fb:'https://images.unsplash.com/photo-1562777717-dc6984f65a63?w=800&q=85', tall:false },
  { id:8, src:'foto8.jpg', fb:'https://images.unsplash.com/photo-1586985289688-ca3cf47d3e6e?w=800&q=85', tall:true },
  { id:9, src:'foto9.jpg', fb:'https://images.unsplash.com/photo-1557925923-cd4648e211a0?w=800&q=85', tall:false },
];

/* ‚îÄ‚îÄ Icons ‚îÄ‚îÄ */
const Ico = {
  ig:  ()=><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5"><rect x="2" y="2" width="20" height="20" rx="5"/><circle cx="12" cy="12" r="4"/><circle cx="17.5" cy="6.5" r="0.5" fill="currentColor"/></svg>,
  fb:  ()=><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5"><path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"/></svg>,
  wa:  ()=><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5"><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"/></svg>,
  x:   ()=><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>,
  cl:  ()=><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5"><polyline points="15 18 9 12 15 6"/></svg>,
  cr:  ()=><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5"><polyline points="9 18 15 12 9 6"/></svg>,
  cal: ()=><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5"><rect x="3" y="4" width="18" height="18" rx="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>,
  bin: ()=><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5"><polyline points="3 6 5 6 21 6"/><path d="M19 6l-1 14H6L5 6"/><path d="M10 11v6M14 11v6M9 6V4h6v2"/></svg>,
};

/* ‚îÄ‚îÄ Utils ‚îÄ‚îÄ */
const fmtDate = d => { try{return new Date(d+'T12:00:00').toLocaleDateString('it-IT',{weekday:'long',year:'numeric',month:'long',day:'numeric'})}catch{return d} };
const sameDay = (a,b) => a.getFullYear()===b.getFullYear()&&a.getMonth()===b.getMonth()&&a.getDate()===b.getDate();
const daysIn = (y,m) => new Date(y,m+1,0).getDate();
const firstDay = (y,m) => { let d=new Date(y,m,1).getDay(); return (d+6)%7; };
const MONTHS = ['Gennaio','Febbraio','Marzo','Aprile','Maggio','Giugno','Luglio','Agosto','Settembre','Ottobre','Novembre','Dicembre'];
const DNAMES = ['Lun','Mar','Mer','Gio','Ven','Sab','Dom'];

/* ‚îÄ‚îÄ useReveal hook ‚îÄ‚îÄ */
function useReveal() {
  useEffect(() => {
    const els = document.querySelectorAll('.reveal');
    const obs = new IntersectionObserver(entries => {
      entries.forEach(e => { if(e.isIntersecting) { e.target.classList.add('visible'); obs.unobserve(e.target); } });
    }, { threshold: 0.12, rootMargin:'0px 0px -50px 0px' });
    els.forEach(el => obs.observe(el));
    return () => obs.disconnect();
  });
}

/* ‚îÄ‚îÄ Toast ‚îÄ‚îÄ */
function Toast({ msg, onClose }) {
  useEffect(() => { const t = setTimeout(onClose, 3000); return () => clearTimeout(t); }, []);
  return <div className="toast">{msg}</div>;
}

/* ‚îÄ‚îÄ Floating WA ‚îÄ‚îÄ */
function FloatWA() {
  return (
    <a href={`https://wa.me/${WA}`} target="_blank" rel="noopener" className="float-wa" title="Scrivici su WhatsApp" aria-label="WhatsApp">
      <svg width="26" height="26" viewBox="0 0 24 24" fill="white"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/></svg>
    </a>
  );
}

/* ‚îÄ‚îÄ NAV ‚îÄ‚îÄ */
function Nav({ active, setActive }) {
  const [open, setOpen] = useState(false);
  const [scrolled, setScrolled] = useState(false);
  useEffect(() => {
    const h = () => setScrolled(window.scrollY > 25);
    window.addEventListener('scroll', h, { passive: true });
    return () => window.removeEventListener('scroll', h);
  }, []);
  const links = ['Home', "L'Atelier", 'Gallery', 'Preventivo'];
  const go = l => {
    setActive(l); setOpen(false);
    const id = l.toLowerCase().replace(/'/g,'').replace(/\s/g,'');
    document.getElementById(id)?.scrollIntoView({ behavior: 'smooth' });
  };
  return (
    <header className={`nav-glass${scrolled?' scrolled':''}`}>
      <div className="nav-inner">
        <button className="nav-logo" onClick={() => go('Home')}>MAVILO<span style={{color:'#D4AF37'}}>.</span></button>
        <nav className="nav-links">
          {links.map(l => <button key={l} className={`nav-link${active===l?' active':''}`} onClick={() => go(l)}>{l}</button>)}
        </nav>
        <button className="hamburger" onClick={() => setOpen(!open)} aria-label="Menu">
          <span className="ham-line" style={{transform:open?'rotate(45deg) translate(4px,4px)':'none'}}/>
          <span className="ham-line" style={{opacity:open?0:1}}/>
          <span className="ham-line" style={{transform:open?'rotate(-45deg) translate(4px,-4px)':'none'}}/>
        </button>
      </div>
      <div className={`mobile-menu${open?' open':''}`}>
        {links.map(l => (
          <button key={l} className="mobile-link" style={{color:active===l?'#D4AF37':'#1A1A1A'}} onClick={() => go(l)}>{l}</button>
        ))}
      </div>
    </header>
  );
}

/* ‚îÄ‚îÄ HERO ‚îÄ‚îÄ */
function Hero({ onCTA }) {
  return (
    <section id="home" style={{minHeight:'100svh',display:'flex',alignItems:'center',justifyContent:'center',position:'relative',background:'#FFF',paddingTop:60}}>
      {/* Background glow */}
      <div style={{position:'absolute',inset:0,background:'radial-gradient(ellipse 65% 50% at 50% 44%, rgba(212,175,55,0.058) 0%, transparent 70%)',pointerEvents:'none'}}/>
      {/* Decorative - hidden on small screens */}
      <div style={{position:'absolute',top:'10%',left:'4%',width:1,height:'min(150px,15vw)',background:'linear-gradient(to bottom,transparent,rgba(212,175,55,0.38),transparent)'}}/>
      <div style={{position:'absolute',bottom:'15%',right:'5%',width:1,height:'min(100px,10vw)',background:'linear-gradient(to bottom,transparent,rgba(212,175,55,0.3),transparent)'}}/>
      <div style={{position:'absolute',top:'8%',right:'7%',width:'min(70px,12vw)',height:'min(70px,12vw)',border:'1px solid rgba(212,175,55,0.22)',borderRadius:'50%'}}/>

      <div style={{textAlign:'center',maxWidth:820,padding:'0 1.25rem',position:'relative',width:'100%'}}>
        <div className="hero-anim ha0" style={{fontFamily:'Lato',fontSize:'0.65rem',letterSpacing:'0.46em',textTransform:'uppercase',color:'#D4AF37',marginBottom:'2rem'}}>
          Atelier Artigianale ¬∑ dal Cuore
        </div>

        <h1 className="hero-title hero-anim ha1">
          MAVILO<br/><span style={{fontStyle:'italic',color:'#D4AF37'}}>DOLCE</span>
        </h1>

        <div className="hero-anim ha2" style={{display:'flex',alignItems:'center',justifyContent:'center',gap:'clamp(0.8rem,3vw,1.5rem)',margin:'1.8rem 0 1.4rem'}}>
          <div style={{height:1,width:'clamp(30px,5vw,55px)',background:'rgba(212,175,55,0.45)'}}/>
          <span style={{fontFamily:'Playfair Display,serif',fontStyle:'italic',fontSize:'clamp(0.95rem,2.2vw,1.35rem)',color:'#888',letterSpacing:'0.04em',whiteSpace:'nowrap'}}>
            Sugar Art & Couture Cakes
          </span>
          <div style={{height:1,width:'clamp(30px,5vw,55px)',background:'rgba(212,175,55,0.45)'}}/>
        </div>

        <p className="hero-anim ha3" style={{fontFamily:'Lato',fontSize:'clamp(0.85rem,1.8vw,0.95rem)',color:'#777',letterSpacing:'0.06em',lineHeight:2,maxWidth:420,margin:'0 auto 2.5rem',padding:'0 0.5rem'}}>
          Ogni petalo √® una promessa.<br/>Ogni creazione, un'emozione irripetibile<br/>plasmata con le mani e il cuore.
        </p>

        <div className="hero-anim ha4" style={{display:'flex',gap:'0.75rem',justifyContent:'center',flexWrap:'wrap',padding:'0 0.5rem'}}>
          <button className="btn-primary" onClick={onCTA} style={{flex:'1 1 auto',maxWidth:240}}>Commissiona un'Opera</button>
          <a href={`https://wa.me/${WA}`} target="_blank" rel="noopener" className="btn-secondary" style={{flex:'1 1 auto',maxWidth:200}}>
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5"><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"/></svg>
            Scrivici
          </a>
        </div>
      </div>

      <div style={{position:'absolute',bottom:'clamp(1.5rem,4vw,2.5rem)',left:'50%',transform:'translateX(-50%)',display:'flex',flexDirection:'column',alignItems:'center',gap:10,opacity:0.7}}>
        <span style={{fontFamily:'Lato',fontSize:'0.57rem',letterSpacing:'0.32em',color:'#D4AF37',textTransform:'uppercase'}}>Scopri</span>
        <div style={{width:1,height:'clamp(36px,5vw,52px)',background:'linear-gradient(to bottom,#D4AF37,transparent)'}}/>
      </div>
    </section>
  );
}

/* ‚îÄ‚îÄ NUMBERS / PHILOSOPHY ‚îÄ‚îÄ */
function Numbers() {
  useReveal();
  const stats = [
    { n:'500+', label:'Torte create', sub:'dal primo petalo' },
    { n:'8+',   label:'Anni di arte', sub:'in continua crescita' },
    { n:'100%', label:'Su commissione', sub:'nessuna replica' },
    { n:'‚àû',    label:'Ispirazione', sub:'ogni storia √® unica' },
  ];
  return (
    <section style={{background:'#1A1A1A',padding:'clamp(3.5rem,8vw,6rem) clamp(1.25rem,5vw,2.5rem)'}}>
      <div style={{maxWidth:1100,margin:'0 auto'}}>
        <div style={{textAlign:'center',marginBottom:'clamp(2.5rem,5vw,4rem)'}}>
          <div className="reveal section-label" style={{color:'rgba(212,175,55,0.8)'}}>La nostra filosofia</div>
          <h2 className="reveal reveal-delay-1 section-title" style={{color:'#fff'}}>
            Numeri che<br/><em style={{color:'#D4AF37'}}>parlano d'arte</em>
          </h2>
        </div>
        <div style={{display:'grid',gridTemplateColumns:'repeat(2,1fr)',gap:'clamp(1.5rem,4vw,2.5rem)'}}>
          {stats.map((s,i) => (
            <div key={i} className={`reveal reveal-delay-${i%4}`} style={{textAlign:'center',borderTop:'1px solid rgba(212,175,55,0.2)',paddingTop:'clamp(1.2rem,3vw,2rem)'}}>
              <div className="stat-num" style={{color:'#D4AF37'}}>{s.n}</div>
              <div style={{fontFamily:'Playfair Display,serif',fontStyle:'italic',color:'rgba(255,255,255,0.85)',fontSize:'clamp(0.9rem,1.8vw,1.05rem)',margin:'0.4rem 0 0.25rem'}}>{s.label}</div>
              <div style={{fontFamily:'Lato',fontSize:'0.72rem',letterSpacing:'0.1em',color:'rgba(255,255,255,0.35)',textTransform:'uppercase'}}>{s.sub}</div>
            </div>
          ))}
        </div>
      </div>
    </section>
  );
}

/* ‚îÄ‚îÄ ATELIER ‚îÄ‚îÄ */
function Atelier() {
  useReveal();
  return (
    <section id="latelier" className="section-pad" style={{background:'#FAFAF8'}}>
      <div style={{maxWidth:1100,margin:'0 auto',display:'grid',gridTemplateColumns:'repeat(auto-fit,minmax(min(100%,320px),1fr))',gap:'clamp(3rem,8vw,6rem)',alignItems:'center'}}>

        {/* Immagini - mobile prima, desktop a sinistra */}
        <div className="reveal" style={{paddingBottom:'clamp(1.5rem,4vw,2rem)',paddingRight:'clamp(0.5rem,3vw,1rem)',order:-1}} >
          <div className="atelier-img-wrap" style={{marginBottom:'clamp(1.5rem,4vw,2rem)'}}>
            <img src="https://images.unsplash.com/photo-1558636508-e0969251be4b?w=700&q=80"
              alt="Sugar Art MAVILO DOLCE" className="atelier-main"
              style={{boxShadow:'0 20px 60px rgba(0,0,0,0.09)'}}
              onError={e=>{e.target.style.display='none';}}/>
            <img src="https://images.unsplash.com/photo-1562440499-64c9a111f713?w=400&q=80"
              alt="Fiori di Zucchero" className="atelier-inset"
              onError={e=>{e.target.style.display='none';}}/>
          </div>
          {/* Badge */}
          <div style={{display:'inline-flex',alignItems:'center',gap:'1rem',padding:'0.8rem 1.2rem',border:'1px solid rgba(212,175,55,0.3)',background:'#fff',marginTop:'clamp(0.5rem,2vw,1rem)'}}>
            <div style={{width:32,height:32,borderRadius:'50%',border:'1px solid rgba(212,175,55,0.5)',display:'flex',alignItems:'center',justifyContent:'center'}}>
              <span style={{color:'#D4AF37',fontSize:'0.9rem'}}>‚ú¶</span>
            </div>
            <div>
              <div style={{fontFamily:'Lato',fontSize:'0.62rem',letterSpacing:'0.18em',textTransform:'uppercase',color:'#D4AF37'}}>Artigianalit√†</div>
              <div style={{fontFamily:'Playfair Display,serif',fontStyle:'italic',fontSize:'0.88rem',color:'#1A1A1A'}}>100% fatto a mano</div>
            </div>
          </div>
        </div>

        {/* Testo */}
        <div>
          <div className="reveal section-label">L'Atelier</div>
          <h2 className="reveal reveal-delay-1 section-title">L'Arte che<br/><em>prende forma</em></h2>
          <span className="reveal reveal-delay-2 gold-bar" style={{marginBottom:'1.8rem',display:'block'}}/>
          <p className="reveal reveal-delay-2" style={{fontFamily:'Lato',fontSize:'clamp(0.88rem,1.6vw,0.94rem)',color:'#555',lineHeight:2.1,marginBottom:'1.4rem',letterSpacing:'0.02em'}}>
            Nell'atelier MAVILO DOLCE ogni creazione nasce da un dialogo profondo tra chi ordina e chi crea. Non esistono template, non esistono repliche: ogni fiore di zucchero viene plasmato a mano, petalo dopo petalo, sfumatura dopo sfumatura.
          </p>
          <p className="reveal reveal-delay-3" style={{fontFamily:'Lato',fontSize:'clamp(0.88rem,1.6vw,0.94rem)',color:'#555',lineHeight:2.1,marginBottom:'2.2rem',letterSpacing:'0.02em'}}>
            Dalla scelta dei colori alla texture della pasta, dall'architettura delle torte ai dettagli finali ‚Äî ogni scelta √® meditata. Il risultato √® un'opera d'arte commestibile che emoziona ancor prima di essere assaggiata.
          </p>
          <div className="reveal reveal-delay-3" style={{display:'grid',gridTemplateColumns:'1fr 1fr',gap:'1rem'}}>
            {['Sugar Art','Fiori Scultura','Wedding Cake','Sweet Table'].map(s=>(
              <div key={s} style={{borderLeft:'2px solid #D4AF37',paddingLeft:'0.9rem'}}>
                <span style={{fontFamily:'Lato',fontSize:'0.7rem',letterSpacing:'0.14em',textTransform:'uppercase',color:'#1A1A1A'}}>{s}</span>
              </div>
            ))}
          </div>
        </div>
      </div>
    </section>
  );
}

/* ‚îÄ‚îÄ LIGHTBOX with touch ‚îÄ‚îÄ */
function Lightbox({ items, idx, onClose, onPrev, onNext }) {
  const item = items[idx];
  const touchX = useRef(null);

  useEffect(() => {
    const h = e => {
      if(e.key==='Escape') onClose();
      if(e.key==='ArrowLeft') onPrev();
      if(e.key==='ArrowRight') onNext();
    };
    window.addEventListener('keydown', h);
    document.body.style.overflow = 'hidden';
    return () => { window.removeEventListener('keydown', h); document.body.style.overflow = ''; };
  }, [idx]);

  const onTouchStart = e => { touchX.current = e.touches[0].clientX; };
  const onTouchEnd = e => {
    if(touchX.current === null) return;
    const dx = e.changedTouches[0].clientX - touchX.current;
    if(Math.abs(dx) > 50) { dx > 0 ? onPrev() : onNext(); }
    touchX.current = null;
  };

  const imgSrc = item.src;
  const [src, setSrc] = useState(imgSrc);

  return (
    <div className="lb-overlay" onClick={onClose}
      onTouchStart={onTouchStart} onTouchEnd={onTouchEnd}>
      {/* Close */}
      <button className="lb-btn" onClick={onClose}
        style={{position:'absolute',top:'1rem',right:'1rem',border:'1px solid rgba(212,175,55,0.2)',width:44,height:44,borderRadius:0}}>
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
      </button>
      {/* Prev */}
      <button className="lb-btn lb-nav lb-prev" onClick={e=>{e.stopPropagation();onPrev();}}
        style={{border:'1px solid rgba(212,175,55,0.2)',width:44,height:44,borderRadius:0}}>
        <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5"><polyline points="15 18 9 12 15 6"/></svg>
      </button>
      {/* Image */}
      <div onClick={e=>e.stopPropagation()} style={{display:'flex',flexDirection:'column',alignItems:'center',gap:'1rem',padding:'0 3.5rem',maxWidth:'100%'}}>
        <img key={idx} src={item.src} alt="MAVILO DOLCE" className="lb-img"
          onError={e=>{if(e.target.src!==item.fb){e.target.src=item.fb;}}}/>
        <div style={{display:'flex',gap:6,marginTop:'0.8rem'}}>
          {items.map((_,i)=>(
            <div key={i} style={{width:i===idx?24:6,height:1,background:i===idx?'#D4AF37':'rgba(255,255,255,0.2)',transition:'all 0.3s'}}/>
          ))}
        </div>
      </div>
      {/* Next */}
      <button className="lb-btn lb-nav lb-next" onClick={e=>{e.stopPropagation();onNext();}}
        style={{border:'1px solid rgba(212,175,55,0.2)',width:44,height:44,borderRadius:0}}>
        <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5"><polyline points="9 18 15 12 9 6"/></svg>
      </button>
    </div>
  );
}

/* ‚îÄ‚îÄ GALLERY ‚îÄ‚îÄ */
function Gallery() {
  const [lb, setLb] = useState(null);
  useReveal();
  return (
    <section id="gallery" className="section-pad" style={{background:'#FFF'}}>
      <div style={{maxWidth:1200,margin:'0 auto'}}>
        <div style={{textAlign:'center',marginBottom:'clamp(2.5rem,6vw,4.5rem)'}}>
          <div className="reveal section-label">Gallery d'Autore</div>
          <h2 className="reveal reveal-delay-1 section-title">Le Nostre <em>Creazioni</em></h2>
          <span className="reveal reveal-delay-2 gold-bar-center" style={{margin:'0 auto'}}/>
          <p className="reveal reveal-delay-3" style={{fontFamily:'Lato',fontSize:'0.8rem',color:'#bbb',letterSpacing:'0.1em',marginTop:'1.2rem'}}>
            Tocca per aprire ¬∑ Scorri per navigare
          </p>
        </div>
        <div className="reveal masonry">
          {GALLERY.map((item,i) => (
            <div key={item.id} className="mason-item" onClick={() => setLb(i)}>
              <img src={item.src} alt={item.alt} className="mason-img"
                style={{aspectRatio:item.tall?'3/4':'4/3'}}
                loading="lazy"
                onError={e=>{if(e.target.src!==item.fb){e.target.src=item.fb;}}}/>
              <div className="mason-overlay"/>
            </div>
          ))}
        </div>
      </div>
      {lb !== null && (
        <Lightbox items={GALLERY} idx={lb} onClose={() => setLb(null)}
          onPrev={() => setLb(i => (i-1+GALLERY.length)%GALLERY.length)}
          onNext={() => setLb(i => (i+1)%GALLERY.length)}/>
      )}
    </section>
  );
}

/* ‚îÄ‚îÄ TESTIMONIAL ‚îÄ‚îÄ */
function Testimonial() {
  useReveal();
  return (
    <section className="testimonial-bg section-pad">
      <div style={{maxWidth:780,margin:'0 auto',textAlign:'center',padding:'0 1.25rem'}}>
        <div className="reveal" style={{color:'#D4AF37',fontSize:'2.5rem',fontFamily:'Georgia,serif',lineHeight:1,marginBottom:'1.5rem',opacity:0.6}}>"</div>
        <blockquote className="reveal reveal-delay-1" style={{fontFamily:'Playfair Display,serif',fontStyle:'italic',fontSize:'clamp(1.15rem,2.8vw,1.7rem)',fontWeight:400,color:'rgba(255,255,255,0.88)',lineHeight:1.65,letterSpacing:'0.02em',marginBottom:'2rem'}}>
          La mia torta nuziale era pi√π di quello che avevo sognato. Ogni fiore sembrava reale, ogni dettaglio raccontava la nostra storia. Non ho parole per descrivere l'emozione.
        </blockquote>
        <div className="reveal reveal-delay-2">
          <div style={{width:38,height:1,background:'rgba(212,175,55,0.4)',margin:'0 auto 1.2rem'}}/>
          <div style={{fontFamily:'Lato',fontSize:'0.72rem',letterSpacing:'0.22em',textTransform:'uppercase',color:'#D4AF37'}}>Sofia & Marco</div>
          <div style={{fontFamily:'Lato',fontSize:'0.7rem',letterSpacing:'0.12em',color:'rgba(255,255,255,0.3)',marginTop:'0.25rem'}}>Matrimonio ¬∑ Settembre 2024</div>
        </div>
      </div>
    </section>
  );
}

/* ‚îÄ‚îÄ PREVENTIVO ‚îÄ‚îÄ */
function Preventivo({ blocked }) {
  const [step, setStep] = useState(1);
  const [form, setForm] = useState({ data:'', invitati:'', tipologia:'', note:'', foto:null, prev:null });
  const [toast, setToast] = useState(null);
  const fileRef = useRef();
  const topRef = useRef();
  useReveal();

  const today = new Date().toISOString().split('T')[0];
  const isBlocked = d => {
    if(!d) return false;
    const dt = new Date(d+'T12:00:00');
    return (blocked||[]).some(b => sameDay(new Date(b+'T12:00:00'), dt));
  };

  const goStep = n => {
    setStep(n);
    setTimeout(() => topRef.current?.scrollIntoView({ behavior:'smooth', block:'start' }), 80);
  };

  const handleFile = e => {
    const f = e.target.files[0]; if(!f) return;
    const r = new FileReader();
    r.onload = ev => setForm(fm => ({...fm, foto:f, prev:ev.target.result}));
    r.readAsDataURL(f);
  };

  const buildMsg = () => {
    const lines = [
      `‚ú® *Richiesta di Commissione ‚Äî MAVILO DOLCE*`, ``,
      `Gentile Atelier,`,
      `mi permetto di contattarvi per commissionare una creazione:`, ``,
      `üìÖ *Data:* ${form.data ? fmtDate(form.data) : '‚Äî'}`,
      `üë• *Invitati:* ${form.invitati || '‚Äî'}`,
      `üéÇ *Tipologia:* ${form.tipologia || '‚Äî'}`,
      form.note ? `üìù *Note:* ${form.note}` : null,
      ``, `Resto a disposizione per un incontro.`, `Con stima,`
    ].filter(x => x !== null).join('\n');
    return encodeURIComponent(lines);
  };

  const send = () => {
    const reqs = JSON.parse(localStorage.getItem('mavilo_req') || '[]');
    reqs.unshift({ ...form, prev:null, ts: new Date().toISOString() });
    localStorage.setItem('mavilo_req', JSON.stringify(reqs.slice(0,20)));
    window.open(`https://wa.me/${WA}?text=${buildMsg()}`, '_blank');
    setToast('Richiesta inviata con eleganza ‚ú¶');
  };

  const tipologie = ['Torta Nuziale','Torta Compleanno','Fiori di Zucchero','Sweet Table','Torta Corporate','Altro'];
  const stepLabels = ['Evento','Creazione','Dettagli'];

  return (
    <section id="preventivo" className="section-pad" style={{background:'#FAFAF8'}}>
      <div style={{maxWidth:660,margin:'0 auto'}} ref={topRef}>
        <div style={{textAlign:'center',marginBottom:'clamp(2.5rem,6vw,4rem)'}}>
          <div className="reveal section-label">Il Configuratore</div>
          <h2 className="reveal reveal-delay-1 section-title">Commissiona<br/><em>la Tua Opera</em></h2>
          <span className="reveal reveal-delay-2 gold-bar-center" style={{margin:'0 auto 1.5rem',display:'block'}}/>
          <p className="reveal reveal-delay-3" style={{fontFamily:'Lato',fontSize:'clamp(0.83rem,1.6vw,0.9rem)',color:'#999',lineHeight:1.95,maxWidth:440,margin:'0 auto',padding:'0 1rem'}}>
            Non esistono prezzi fissi, perch√© non esistono creazioni uguali. Ogni opera nasce da un dialogo.
          </p>
        </div>

        {/* Step indicator */}
        <div className="reveal" style={{display:'flex',alignItems:'center',justifyContent:'center',marginBottom:'2.5rem',padding:'0 1rem'}}>
          {stepLabels.map((l,i) => (
            <React.Fragment key={i}>
              <div style={{display:'flex',flexDirection:'column',alignItems:'center',gap:'0.5rem'}}>
                <div className={`step-dot ${step>i+1?'done':step===i+1?'active':'idle'}`}
                  onClick={() => step > i+1 && goStep(i+1)}>
                  {step > i+1 ? '‚úì' : i+1}
                </div>
                <span style={{fontFamily:'Lato',fontSize:'0.58rem',letterSpacing:'0.14em',textTransform:'uppercase',color:step===i+1?'#1A1A1A':'#ccc'}}>{l}</span>
              </div>
              {i < 2 && <div style={{flex:1,height:1,background:step>i+1?'#D4AF37':'rgba(26,26,26,0.12)',margin:'0 0.6rem',marginBottom:'1.5rem',transition:'background 0.4s'}}/>}
            </React.Fragment>
          ))}
        </div>

        {/* Form card */}
        <div className="reveal" style={{background:'#FFF',border:'1px solid rgba(212,175,55,0.18)',padding:'clamp(1.5rem,6vw,3rem)'}}>

          {/* STEP 1 */}
          {step === 1 && (
            <div>
              <h3 style={{fontFamily:'Playfair Display,serif',fontStyle:'italic',fontSize:'clamp(1.2rem,2.5vw,1.45rem)',fontWeight:400,color:'#1A1A1A',marginBottom:'1.8rem'}}>Il Vostro Evento</h3>
              <div style={{display:'flex',flexDirection:'column',gap:'1.4rem'}}>
                <div>
                  <label className="f-label">Data dell'Evento *</label>
                  <input type="date" className="f-input" value={form.data} min={today}
                    onChange={e => setForm(f=>({...f,data:e.target.value}))}/>
                  {form.data && isBlocked(form.data) && (
                    <p style={{color:'#C0392B',fontFamily:'Lato',fontSize:'0.76rem',marginTop:'0.5rem',letterSpacing:'0.04em'}}>
                      ‚ú¶ Questa data non √® disponibile. Scegline un'altra.
                    </p>
                  )}
                  {form.data && !isBlocked(form.data) && new Date(form.data+'T12:00:00') > new Date() && (
                    <p style={{color:'#2ecc71',fontFamily:'Lato',fontSize:'0.74rem',marginTop:'0.5rem',letterSpacing:'0.04em'}}>
                      ‚úì Data disponibile
                    </p>
                  )}
                </div>
                <div>
                  <label className="f-label">Numero di Invitati *</label>
                  <input type="number" min="1" max="5000" className="f-input" placeholder="es. 80"
                    value={form.invitati} onChange={e=>setForm(f=>({...f,invitati:e.target.value}))}/>
                </div>
              </div>
              <button className="btn-primary" style={{width:'100%',marginTop:'2rem'}}
                onClick={() => {
                  if(!form.data || !form.invitati) { setToast('Compila tutti i campi ‚ú¶'); return; }
                  if(isBlocked(form.data)) { setToast('Data non disponibile ‚ú¶'); return; }
                  goStep(2);
                }}>Continua ‚Üí</button>
            </div>
          )}

          {/* STEP 2 */}
          {step === 2 && (
            <div>
              <h3 style={{fontFamily:'Playfair Display,serif',fontStyle:'italic',fontSize:'clamp(1.2rem,2.5vw,1.45rem)',fontWeight:400,color:'#1A1A1A',marginBottom:'1.8rem'}}>La Vostra Creazione</h3>
              <div style={{display:'grid',gridTemplateColumns:'1fr 1fr',gap:'0.6rem',marginBottom:'0.5rem'}}>
                {tipologie.map(t => (
                  <button key={t} className={`tipo-btn${form.tipologia===t?' active':''}`}
                    onClick={() => setForm(f=>({...f,tipologia:t}))}>
                    {t}
                  </button>
                ))}
              </div>
              <div style={{display:'flex',gap:'0.6rem',marginTop:'1.5rem'}}>
                <button className="btn-ghost" style={{flex:1}} onClick={() => goStep(1)}>‚Üê Indietro</button>
                <button className="btn-primary" style={{flex:2}}
                  onClick={() => { if(!form.tipologia){setToast('Scegli la tipologia ‚ú¶');return;} goStep(3); }}>
                  Continua ‚Üí
                </button>
              </div>
            </div>
          )}

          {/* STEP 3 */}
          {step === 3 && (
            <div>
              <h3 style={{fontFamily:'Playfair Display,serif',fontStyle:'italic',fontSize:'clamp(1.2rem,2.5vw,1.45rem)',fontWeight:400,color:'#1A1A1A',marginBottom:'1.8rem'}}>Dettagli & Ispirazione</h3>
              <div style={{display:'flex',flexDirection:'column',gap:'1.4rem'}}>
                <div>
                  <label className="f-label">Note e Visione (opzionale)</label>
                  <textarea className="f-input" rows={4} style={{resize:'vertical',lineHeight:1.75}}
                    placeholder="Descrivi colori, atmosfera, sogno..."
                    value={form.note} onChange={e=>setForm(f=>({...f,note:e.target.value}))}/>
                </div>
                <div>
                  <label className="f-label">Foto di Ispirazione (opzionale)</label>
                  <div onClick={() => fileRef.current.click()}
                    style={{border:'1px dashed rgba(212,175,55,0.4)',padding:'1.5rem 1rem',textAlign:'center',cursor:'pointer',background:'rgba(212,175,55,0.025)',minHeight:90,display:'flex',alignItems:'center',justifyContent:'center',flexDirection:'column',gap:6,transition:'background 0.2s'}}
                    onMouseEnter={e=>e.currentTarget.style.background='rgba(212,175,55,0.07)'}
                    onMouseLeave={e=>e.currentTarget.style.background='rgba(212,175,55,0.025)'}>
                    {form.prev ? (
                      <img src={form.prev} alt="Preview" style={{maxHeight:160,maxWidth:'100%',objectFit:'contain'}}/>
                    ) : (
                      <>
                        <div style={{fontSize:'1.3rem',color:'#D4AF37'}}>‚ú¶</div>
                        <span style={{fontFamily:'Lato',fontSize:'0.78rem',color:'#D4AF37',letterSpacing:'0.1em'}}>Carica immagine</span>
                        <span style={{fontFamily:'Lato',fontSize:'0.68rem',color:'#ccc'}}>JPG, PNG ‚Äî max 10MB</span>
                      </>
                    )}
                    <input ref={fileRef} type="file" accept="image/*" onChange={handleFile} style={{display:'none'}}/>
                  </div>
                  {form.prev && (
                    <button onClick={() => setForm(f=>({...f,foto:null,prev:null}))}
                      style={{fontFamily:'Lato',fontSize:'0.7rem',color:'#bbb',background:'none',border:'none',cursor:'pointer',marginTop:'0.4rem',letterSpacing:'0.08em'}}>
                      √ó Rimuovi
                    </button>
                  )}
                </div>
              </div>

              {/* Riepilogo */}
              <div style={{margin:'1.8rem 0',padding:'1.3rem',background:'#FAFAF8',border:'1px solid rgba(212,175,55,0.16)'}}>
                <div style={{fontFamily:'Lato',fontSize:'0.6rem',letterSpacing:'0.28em',textTransform:'uppercase',color:'#D4AF37',marginBottom:'0.9rem'}}>Riepilogo</div>
                {[['Data',form.data?fmtDate(form.data):'‚Äî'],['Invitati',form.invitati?`${form.invitati} persone`:'‚Äî'],['Tipologia',form.tipologia||'‚Äî']].map(([k,v]) => (
                  <div key={k} className="recap-row"><span className="recap-key">{k}</span><span className="recap-val">{v}</span></div>
                ))}
              </div>

              <div style={{display:'flex',gap:'0.6rem',flexWrap:'wrap'}}>
                <button className="btn-ghost" style={{flex:'1 1 auto'}} onClick={() => goStep(2)}>‚Üê Indietro</button>
                <button className="btn-wa" style={{flex:'2 1 auto'}} onClick={send}>
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5"><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"/></svg>
                  Invia su WhatsApp
                </button>
              </div>
            </div>
          )}
        </div>
      </div>
      {toast && <Toast msg={toast} onClose={() => setToast(null)}/>}
    </section>
  );
}

/* ‚îÄ‚îÄ ADMIN CALENDAR ‚îÄ‚îÄ */
function AdminCalendar({ blocked, setBlocked }) {
  const now = new Date();
  const [yr, setYr] = useState(now.getFullYear());
  const [mo, setMo] = useState(now.getMonth());
  const days = daysIn(yr, mo);
  const first = firstDay(yr, mo);
  const prevM = () => mo === 0 ? (setYr(y=>y-1), setMo(11)) : setMo(m=>m-1);
  const nextM = () => mo === 11 ? (setYr(y=>y+1), setMo(0)) : setMo(m=>m+1);
  const toggle = ds => {
    const u = blocked.includes(ds) ? blocked.filter(d=>d!==ds) : [...blocked, ds];
    setBlocked(u); localStorage.setItem('mavilo_blocked', JSON.stringify(u));
  };
  return (
    <div>
      <div style={{display:'flex',alignItems:'center',justifyContent:'space-between',marginBottom:'1.2rem'}}>
        <button onClick={prevM} className="lb-btn" style={{border:'1px solid rgba(212,175,55,0.25)',width:36,height:36}}><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5"><polyline points="15 18 9 12 15 6"/></svg></button>
        <span style={{fontFamily:'Playfair Display',fontStyle:'italic',color:'#fff',fontSize:'1rem'}}>{MONTHS[mo]} {yr}</span>
        <button onClick={nextM} className="lb-btn" style={{border:'1px solid rgba(212,175,55,0.25)',width:36,height:36}}><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5"><polyline points="9 18 15 12 9 6"/></svg></button>
      </div>
      <div style={{display:'grid',gridTemplateColumns:'repeat(7,1fr)',gap:3,marginBottom:'0.4rem'}}>
        {DNAMES.map(d=><div key={d} style={{textAlign:'center',fontFamily:'Lato',fontSize:'0.6rem',letterSpacing:'0.08em',color:'#555',padding:'0.3rem 0'}}>{d}</div>)}
      </div>
      <div style={{display:'grid',gridTemplateColumns:'repeat(7,1fr)',gap:3}}>
        {Array.from({length:first}).map((_,i) => <div key={`e${i}`}/>)}
        {Array.from({length:days}).map((_,i) => {
          const day = i+1;
          const ds = `${yr}-${String(mo+1).padStart(2,'0')}-${String(day).padStart(2,'0')}`;
          const d = new Date(yr, mo, day);
          const past = d < new Date(now.getFullYear(), now.getMonth(), now.getDate());
          const isT = sameDay(d, now);
          const isBlk = blocked.includes(ds);
          return <div key={day} className={`cal-day${isBlk?' cal-blocked':''}${isT?' cal-today':''}${past?' cal-past':''}`}
            onClick={() => !past && toggle(ds)}>{day}</div>;
        })}
      </div>
      <div style={{marginTop:'1rem',display:'flex',gap:'1.2rem',flexWrap:'wrap',fontFamily:'Lato',fontSize:'0.67rem',letterSpacing:'0.06em',color:'#555'}}>
        <span><span style={{display:'inline-block',width:11,height:11,border:'1px solid rgba(212,175,55,0.4)',background:'rgba(212,175,55,0.14)',marginRight:5,verticalAlign:'middle'}}/>Bloccata</span>
        <span><span style={{display:'inline-block',width:11,height:11,border:'1px solid #D4AF37',marginRight:5,verticalAlign:'middle'}}/>Oggi</span>
        <span style={{color:'rgba(255,255,255,0.25)'}}>Tocca per bloccare/sbloccare</span>
      </div>
    </div>
  );
}

/* ‚îÄ‚îÄ ADMIN DASH ‚îÄ‚îÄ */
function AdminDash({ onClose, blocked, setBlocked }) {
  const [tab, setTab] = useState('cal');
  const reqs = JSON.parse(localStorage.getItem('mavilo_req') || '[]');
  const gcal = r => {
    const t = encodeURIComponent('MAVILO DOLCE ‚Äî ' + (r.tipologia||'Commissione'));
    const d = (r.data||'').replace(/-/g,'');
    window.open(`https://calendar.google.com/calendar/render?action=TEMPLATE&text=${t}&dates=${d}/${d}&details=${encodeURIComponent('Commissione MAVILO DOLCE\nTipologia: '+(r.tipologia||'')+'  Invitati: '+(r.invitati||''))}`, '_blank');
  };
  const tabs = [['cal','üìÖ Calendario'],['req','üìã Richieste']];
  useEffect(() => { document.body.style.overflow = 'hidden'; return () => { document.body.style.overflow = ''; }; }, []);
  return (
    <div className="admin-wrap">
      <div className="admin-inner">
        <div style={{display:'flex',alignItems:'center',justifyContent:'space-between',marginBottom:'2rem',borderBottom:'1px solid rgba(212,175,55,0.15)',paddingBottom:'1.5rem'}}>
          <div>
            <div style={{fontFamily:'Lato',fontSize:'0.6rem',letterSpacing:'0.42em',textTransform:'uppercase',color:'#D4AF37',marginBottom:'0.4rem'}}>Area Riservata</div>
            <h2 style={{fontFamily:'Playfair Display',fontStyle:'italic',color:'#fff',fontSize:'1.6rem',fontWeight:400}}>Gestione Atelier</h2>
          </div>
          <button className="lb-btn" onClick={onClose} style={{border:'1px solid rgba(212,175,55,0.25)',width:44,height:44}}>
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
          </button>
        </div>
        <div style={{display:'flex',gap:'0.4rem',marginBottom:'2rem',flexWrap:'wrap'}}>
          {tabs.map(([id,label]) => (
            <button key={id} onClick={() => setTab(id)}
              style={{fontFamily:'Lato',fontSize:'0.68rem',letterSpacing:'0.14em',textTransform:'uppercase',background:tab===id?'#D4AF37':'transparent',color:tab===id?'#1A1A1A':'#666',border:`1px solid ${tab===id?'#D4AF37':'rgba(255,255,255,0.1)'}`,padding:'0.65rem 1.2rem',cursor:'pointer',transition:'all 0.2s',minHeight:44}}>
              {label}
            </button>
          ))}
        </div>

        {tab === 'cal' && (
          <div style={{background:'rgba(255,255,255,0.03)',border:'1px solid rgba(212,175,55,0.15)',padding:'clamp(1.2rem,4vw,2rem)'}}>
            <div style={{fontFamily:'Lato',fontSize:'0.66rem',letterSpacing:'0.22em',textTransform:'uppercase',color:'#D4AF37',marginBottom:'0.8rem'}}>Disponibilit√† Calendario</div>
            <p style={{fontFamily:'Lato',fontSize:'0.79rem',color:'#555',lineHeight:1.8,marginBottom:'1.4rem'}}>
              Tocca una data per <strong style={{color:'rgba(212,175,55,0.8)'}}>bloccarla</strong>. Sar√† non prenotabile nel form clienti. Tocca di nuovo per sbloccarla.
            </p>
            <AdminCalendar blocked={blocked} setBlocked={setBlocked}/>
            {blocked.length > 0 && (
              <div style={{marginTop:'1.5rem'}}>
                <div style={{fontFamily:'Lato',fontSize:'0.6rem',letterSpacing:'0.2em',textTransform:'uppercase',color:'#555',marginBottom:'0.7rem'}}>Date bloccate ({blocked.length})</div>
                <div style={{display:'flex',flexWrap:'wrap',gap:'0.45rem'}}>
                  {[...blocked].sort().map(d => (
                    <span key={d} style={{fontFamily:'Lato',fontSize:'0.7rem',color:'#D4AF37',border:'1px solid rgba(212,175,55,0.25)',padding:'0.28rem 0.7rem',display:'inline-flex',alignItems:'center',gap:8}}>
                      {d}
                      <button onClick={() => { const u=blocked.filter(x=>x!==d); setBlocked(u); localStorage.setItem('mavilo_blocked',JSON.stringify(u)); }}
                        style={{background:'none',border:'none',color:'#555',cursor:'pointer',display:'flex',alignItems:'center',padding:2}}>
                        <svg width="11" height="11" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5"><polyline points="3 6 5 6 21 6"/><path d="M19 6l-1 14H6L5 6"/><path d="M10 11v6M14 11v6M9 6V4h6v2"/></svg>
                      </button>
                    </span>
                  ))}
                </div>
              </div>
            )}
          </div>
        )}

        {tab === 'req' && (
          <div>
            <div style={{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:'1.2rem',flexWrap:'wrap',gap:'0.5rem'}}>
              <div style={{fontFamily:'Lato',fontSize:'0.66rem',letterSpacing:'0.22em',textTransform:'uppercase',color:'#D4AF37'}}>Storico Richieste ({reqs.length})</div>
              {reqs.length > 0 && (
                <button onClick={()=>{localStorage.removeItem('mavilo_req');window.location.reload();}}
                  style={{fontFamily:'Lato',fontSize:'0.62rem',letterSpacing:'0.1em',color:'#555',background:'none',border:'1px solid rgba(255,255,255,0.08)',padding:'0.35rem 0.7rem',cursor:'pointer',minHeight:36}}>
                  Cancella tutto
                </button>
              )}
            </div>
            {reqs.length === 0 ? (
              <div style={{textAlign:'center',padding:'4rem 2rem'}}>
                <div style={{fontFamily:'Playfair Display',fontStyle:'italic',color:'#555',fontSize:'1rem',marginBottom:'0.5rem'}}>Nessuna richiesta ancora</div>
                <div style={{fontFamily:'Lato',fontSize:'0.76rem',color:'#444'}}>Le commissioni appariranno qui dopo l'invio</div>
              </div>
            ) : reqs.map((r,i) => (
              <div key={i} style={{background:'rgba(255,255,255,0.03)',border:'1px solid rgba(212,175,55,0.1)',padding:'1.2rem',marginBottom:'0.7rem'}}>
                <div style={{display:'flex',justifyContent:'space-between',alignItems:'flex-start',flexWrap:'wrap',gap:'0.8rem'}}>
                  <div style={{flex:1,minWidth:0}}>
                    <div style={{fontFamily:'Playfair Display',fontStyle:'italic',color:'#D4AF37',fontSize:'0.95rem',marginBottom:'0.4rem'}}>{r.tipologia||'‚Äî'}</div>
                    <div style={{fontFamily:'Lato',fontSize:'0.74rem',color:'#666',lineHeight:1.8}}>
                      <div>üìÖ {r.data||'‚Äî'} &nbsp;¬∑&nbsp; üë• {r.invitati||'‚Äî'}</div>
                      {r.note && <div style={{overflow:'hidden',textOverflow:'ellipsis',whiteSpace:'nowrap',maxWidth:280}}>üìù {r.note}</div>}
                      <div style={{color:'#3a3a3a',fontSize:'0.66rem',marginTop:'0.25rem'}}>{new Date(r.ts).toLocaleDateString('it-IT',{day:'2-digit',month:'long',year:'numeric',hour:'2-digit',minute:'2-digit'})}</div>
                    </div>
                  </div>
                  <button onClick={() => gcal(r)}
                    style={{fontFamily:'Lato',fontSize:'0.6rem',letterSpacing:'0.14em',textTransform:'uppercase',background:'transparent',color:'#D4AF37',border:'1px solid rgba(212,175,55,0.3)',padding:'0.45rem 0.8rem',cursor:'pointer',display:'flex',alignItems:'center',gap:5,whiteSpace:'nowrap',minHeight:36}}>
                    <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5"><rect x="3" y="4" width="18" height="18" rx="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
                    Google Cal
                  </button>
                </div>
              </div>
            ))}
          </div>
        )}
      </div>
    </div>
  );
}

/* ‚îÄ‚îÄ ADMIN LOGIN ‚îÄ‚îÄ */
function AdminLogin({ onOk, onClose }) {
  const [pw, setPw] = useState('');
  const [err, setErr] = useState('');
  const [shake, setShake] = useState(false);
  useEffect(() => { document.body.style.overflow = 'hidden'; return () => { document.body.style.overflow = ''; }; }, []);
  const go = () => {
    if(pw === PASS) { onOk(); }
    else { setErr('Codice non valido.'); setPw(''); setShake(true); setTimeout(()=>setShake(false),500); }
  };
  return (
    <div className="login-wrap">
      <div className="login-card" style={{transform:shake?'translateX(-6px)':'none',transition:'transform 0.1s'}}>
        <div style={{textAlign:'center',marginBottom:'2.2rem'}}>
          <div style={{fontFamily:'Lato',fontSize:'0.6rem',letterSpacing:'0.42em',textTransform:'uppercase',color:'#D4AF37',marginBottom:'0.8rem'}}>Accesso Riservato</div>
          <div style={{fontFamily:'Playfair Display',fontStyle:'italic',color:'#fff',fontSize:'1.4rem',fontWeight:400}}>Gestione Atelier</div>
        </div>
        <input type="password" placeholder="Codice di accesso" value={pw}
          onChange={e=>setPw(e.target.value)} onKeyDown={e=>e.key==='Enter'&&go()}
          className="f-input" style={{marginBottom:'0.5rem',background:'rgba(255,255,255,0.05)',border:'1px solid rgba(212,175,55,0.28)',color:'#fff',letterSpacing:'0.15em'}}/>
        {err && <p style={{color:'#E74C3C',fontFamily:'Lato',fontSize:'0.74rem',marginBottom:'0.8rem',letterSpacing:'0.04em'}}>{err}</p>}
        <div style={{display:'flex',gap:'0.6rem',marginTop:'1rem'}}>
          <button onClick={onClose} className="btn-ghost" style={{flex:1,color:'#555',borderColor:'rgba(255,255,255,0.08)'}}>Annulla</button>
          <button onClick={go} className="btn-primary" style={{flex:2,background:'#D4AF37',color:'#1A1A1A'}}>Accedi</button>
        </div>
      </div>
    </div>
  );
}

/* ‚îÄ‚îÄ FOOTER ‚îÄ‚îÄ */
function Footer({ onAdmin }) {
  const yr = new Date().getFullYear();
  const socials = [[IG,'Instagram',<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5"><rect x="2" y="2" width="20" height="20" rx="5"/><circle cx="12" cy="12" r="4"/><circle cx="17.5" cy="6.5" r="0.5" fill="currentColor"/></svg>],[FB,'Facebook',<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5"><path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"/></svg>],[`https://wa.me/${WA}`,'WhatsApp',<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5"><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"/></svg>]];
  return (
    <footer style={{background:'#111',color:'#fff',padding:'clamp(4rem,10vw,7rem) clamp(1.25rem,5vw,2.5rem) clamp(2rem,5vw,3rem)'}}>
      <div style={{maxWidth:1200,margin:'0 auto'}}>
        <div style={{textAlign:'center',marginBottom:'clamp(3rem,7vw,5rem)'}}>
          <div style={{fontFamily:'Playfair Display,serif',fontSize:'clamp(2rem,7vw,4.5rem)',fontWeight:400,letterSpacing:'0.1em',color:'#fff',marginBottom:'0.3rem'}}>
            MAVILO<span style={{color:'#D4AF37'}}>.</span>
          </div>
          <div style={{fontFamily:'Playfair Display',fontStyle:'italic',color:'rgba(255,255,255,0.28)',fontSize:'clamp(0.85rem,1.8vw,1rem)',marginBottom:'2.5rem',letterSpacing:'0.05em'}}>
            Sugar Art & Couture Cakes
          </div>
          <div style={{display:'flex',justifyContent:'center',gap:'0.75rem',marginBottom:'3rem'}}>
            {socials.map(([href,label,icon]) => (
              <a key={label} href={href} target="_blank" rel="noopener" title={label} aria-label={label}
                style={{width:48,height:48,border:'1px solid rgba(212,175,55,0.22)',display:'flex',alignItems:'center',justifyContent:'center',color:'rgba(255,255,255,0.32)',textDecoration:'none',transition:'all 0.3s'}}
                onMouseEnter={e=>{e.currentTarget.style.borderColor='#D4AF37';e.currentTarget.style.color='#D4AF37';}}
                onMouseLeave={e=>{e.currentTarget.style.borderColor='rgba(212,175,55,0.22)';e.currentTarget.style.color='rgba(255,255,255,0.32)';}}>
                {icon}
              </a>
            ))}
          </div>
          <div style={{width:38,height:1,background:'rgba(212,175,55,0.22)',margin:'0 auto'}}/>
        </div>
        <div style={{display:'flex',justifyContent:'space-between',alignItems:'center',flexWrap:'wrap',gap:'1rem'}}>
          <p style={{fontFamily:'Lato',fontSize:'0.68rem',color:'rgba(255,255,255,0.18)',letterSpacing:'0.1em'}}>
            ¬© {yr} MAVILO DOLCE ‚Äî Tutti i diritti riservati
          </p>
          <button onClick={onAdmin}
            style={{fontFamily:'Lato',fontSize:'0.57rem',letterSpacing:'0.22em',textTransform:'uppercase',background:'none',color:'rgba(255,255,255,0.07)',border:'none',cursor:'pointer',padding:'0.3rem',transition:'color 0.3s',minHeight:36,minWidth:44}}
            onMouseEnter={e=>e.target.style.color='rgba(212,175,55,0.35)'}
            onMouseLeave={e=>e.target.style.color='rgba(255,255,255,0.07)'}>
            ‚ú¶ Gestione
          </button>
        </div>
      </div>
    </footer>
  );
}

/* ‚îÄ‚îÄ ROOT APP ‚îÄ‚îÄ */
function App() {
  const [nav, setNav] = useState('Home');
  const [admin, setAdmin] = useState(null);
  const [blocked, setBlocked] = useState(() => {
    try { return JSON.parse(localStorage.getItem('mavilo_blocked') || '[]'); } catch { return []; }
  });

  /* Loading screen */
  useEffect(() => {
    const loader = document.getElementById('loader');
    const t = setTimeout(() => loader?.classList.add('hidden'), 1200);
    return () => clearTimeout(t);
  }, []);

  /* Active nav via IntersectionObserver */
  useEffect(() => {
    const secs = [{id:'home',label:'Home'},{id:'latelier',label:"L'Atelier"},{id:'gallery',label:'Gallery'},{id:'preventivo',label:'Preventivo'}];
    const obs = new IntersectionObserver(entries => {
      entries.forEach(e => { if(e.isIntersecting) { const s=secs.find(s=>s.id===e.target.id); if(s) setNav(s.label); } });
    }, { threshold:0.3 });
    secs.forEach(s => { const el=document.getElementById(s.id); if(el) obs.observe(el); });
    return () => obs.disconnect();
  }, []);

  const scrollTo = id => setTimeout(() => document.getElementById(id)?.scrollIntoView({behavior:'smooth'}), 50);

  return (
    <>
      <Nav active={nav} setActive={setNav}/>
      <Hero onCTA={() => scrollTo('preventivo')}/>
      <Numbers/>
      <Atelier/>
      <Gallery/>
      <Testimonial/>
      <Preventivo blocked={blocked}/>
      <Footer onAdmin={() => setAdmin('login')}/>
      <FloatWA/>
      {admin === 'login' && <AdminLogin onOk={() => setAdmin('dash')} onClose={() => setAdmin(null)}/>}
      {admin === 'dash' && <AdminDash onClose={() => setAdmin(null)} blocked={blocked} setBlocked={setBlocked}/>}
    </>
  );
}

ReactDOM.createRoot(document.getElementById('root')).render(<App/>);
</script>
</body>
</html>
